<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>レッスン 08</title>
    <link rel="stylesheet" href="lesson.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic:wght@400;700&display=swap" rel="stylesheet" />
    <script src="./gist-embed.min.js"></script>
  </head>

  <body>
    <header>
      <h1>レッスン 08</h1>
      <p>〜 for 文 〜</p>
    </header>

    <nav class="back">
      <a href="../index.html">🔙</a>
      <a href="#">🔝</a>
    </nav>

    <main>
      <h2>サンプルコード</h2>

      <ul>
        <li>
          サポートサイトでは、<mark>async function draw() { ... }</mark> の中のコードは省略せずにすべて<ruby
            >載<rt>の</rt></ruby
          >せています。
        </li>
        <li>本に載っていない部分には<span class="gray">灰色の背景色</span>を付けています。</li>
        <li>
          2つ目のサンプルコードからは先頭2行のおまじないと
          <mark>function setup() { ... }</mark>
          は省略しますが、みなさんのコードからは消さないでください。
        </li>
        <li>ここに載せているサンプルコードには、コードが読み取りやすいように「空行」を追加しています。</li>
        <li>
          キャプション横の
          <span class="p5link">p5.js</span>
          をクリックするとp5.jsのウェブエディターが開き、プログラムを実行することができます。
        </li>
      </ul>

      <div class="sketchLink" style="width: 50%">
        <a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener">
          ピゴニャンのスケッチを開く
        </a>
      </div>

      <nav class="codeNav">
        <select id="codeSelect">
          <option value="init" selected disabled>サンプルコードを選ぶ</option>
        </select>
        <label for="codeSelect">▼</label>
      </nav>

      <h3>「◯回繰り返す」 for文</h3>

      <h4 class="caption">
        <span>p.144</span>
        図8.1 ［構文］ for文（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/xMwbsQOCY" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="898f6ff08b50f32d0b0303e0604ed6dd"
        data-gist-highlight-line="1-11, 16"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.145</span>
        図8.4 for文を使って5回に分けて歩く比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/m_jhUAazz" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>上の構文の例とほとんど同じですが少しだけ違います。</p>
      <code
        data-gist-id="47443bf642ef3f10ad7e557545c88fc1"
        data-gist-highlight-line="1-3, 8"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.146</span>
        コード8.1 for文の()内で複数の変数を使う
        <a href="https://editor.p5js.org/p5nyan/sketches/IE8ucCnKs" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="4c92e5b3e94ce35e0b2b892b531951e8"
        data-gist-highlight-line="1-3, 8"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.146</span>
        コード8.2 for文の()の中は個別のコードとしても正しい
        <a href="https://editor.p5js.org/p5nyan/sketches/HZS2YKcwK" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        実行しても何も起こりません。エラーが出ない…ということを確認してください。なお、警告はコードを書きかえて保存しないと表示されません。
      </p>
      <code
        data-gist-id="9429f7a5db0bc1a7a65516a415a521c8"
        data-gist-highlight-line="1-3, 15-16"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.146</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/2tBH6Jn3i" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        エラーの出るコードが2つあるので、下のほうのエラーを確認したいときは、8行目のコード（上のほうのエラーが出る箇所）をコメントアウトしてください。
      </p>
      <code
        data-gist-id="bae08647af154fe1217ac1825e3f60f8"
        data-gist-highlight-line="1-3, 9-11, 18"
        data-gist-hide-footer="true"
      ></code>

      <h3>8.2 いろいろな繰り返しパターン</h3>

      <h4 class="caption">
        <span>p.147</span>
        コード8.3 カウントダウン
        <a href="https://editor.p5js.org/p5nyan/sketches/FYui3LsjG" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        参考として載せているwhile文の例はコメントアウトしています。同じ内容ですが、while文のほうを実行したい場合は、for文のほうをコメントアウトしてください。以下、コード8.7まで同様です。
      </p>
      <code
        data-gist-id="a424161577c80b395563d0c786f87151"
        data-gist-highlight-line="1-3, 9-18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.147</span>
        コード8.4 カウンター変数以外の変数を使う
        <a href="https://editor.p5js.org/p5nyan/sketches/kFdtlJCW3" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="8993e8a308d086911714bc68aff31853"
        data-gist-highlight-line="1-3, 9-18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.148</span>
        コード8.5 複数の変数を使う
        <a href="https://editor.p5js.org/p5nyan/sketches/z7dF81owK" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="27b8d3f4251d73726b01bfe532f10255"
        data-gist-highlight-line="1-3, 10-20"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.148</span>
        コード8.6 コード8.5と同じプログラムをカウンター変数だけで書く
        <a href="https://editor.p5js.org/p5nyan/sketches/j4OEXYhR-" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="414d174e4466109a9dd453695edf07ca"
        data-gist-highlight-line="1-3, 9-17"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.148</span>
        コード8.7 乱数を使った繰り返し
        <a href="https://editor.p5js.org/p5nyan/sketches/vYlEAHsQc" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="8187a2c8e33865eb99d87f6418d379f5"
        data-gist-highlight-line="1-3, 9-18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.148</span>
        コード8.8 for文の( )内で関数の戻り値を使う
        <a href="https://editor.p5js.org/p5nyan/sketches/KPFvQY0LT" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="1e65d43780298bfc9d26f6651ec033a9"
        data-gist-highlight-line="1-7, 13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.148</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/lwbZ1FqiU" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="2283176cbb8dc9675ded5f054c7f2043"
        data-gist-highlight-line="1-3, 14"
        data-gist-hide-footer="true"
      ></code>

      <h3>8.3 繰り返しの中で繰り返す</h3>

      <h4 class="caption">
        <span>p.150</span>
        コード8.9 剰余演算子%を使ってピゴニャンを往復させる
        <a href="https://editor.p5js.org/p5nyan/sketches/QsStkF8cb" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="57875162755c752fb8c49e218dd32472"
        data-gist-highlight-line="1-3, 14"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.150</span>
        図8.8 二重ループを使ってピゴニャンを往復させる比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/xzreZuRI0" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="0ee61aea89380961c57781b08b4aa2b5"
        data-gist-highlight-line="1-3, 12"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.151</span>
        コード8.10 魚を四角く並べる
        <a href="https://editor.p5js.org/p5nyan/sketches/qHQ4HpdCw" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="b9040606e05737950c3179f43e2cb37f"
        data-gist-highlight-line="1-3, 11"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.152</span>
        コード8.11 外側のループにbreak文を追加したコード
        <a href="https://editor.p5js.org/p5nyan/sketches/DnQsdWDQx" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>追加した部分だけに黄色の背景色を付けています。</p>
      <code
        data-gist-id="1b2696b816002011e4cbd97a1c90752f"
        data-gist-highlight-line="1-3, 5, 9-13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.153</span>
        コード8.12 内側のループにbreak文を追加したコード
        <a href="https://editor.p5js.org/p5nyan/sketches/_FXxzxPI7" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>追加した部分だけに黄色の背景色を付けています。</p>
      <code
        data-gist-id="89c902404a7605d230233f75626e77d9"
        data-gist-highlight-line="1-3, 5-6, 10-13"
        data-gist-hide-footer="true"
      ></code>

      <h3>8.4 値のリストを使って繰り返す for...of文</h3>

      <h4 class="caption">
        <span>p.154</span>
        図8.14 ［構文］ for...of文（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/IUmZ4HaGo" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="8c8f40cb3522665f1c4e5718f7c96635"
        data-gist-highlight-line="1-3, 8"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.155-156</span>
        コード8.13 文字列から1文字ずつ取り出す、<wbr />本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/DCvNyl_BB" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>p.156の本文コードも追加しています。ピゴニャンが折り返して2回「こんにちは」といいます。</p>
      <code
        data-gist-id="a1ec4dca771326132d97caa4eb7af07e"
        data-gist-highlight-line="1-3, 10-13, 21"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.156</span>
        コード8.14 値のリストから1つずつ値を取り出すコード、<wbr />コード8.15 値のリストを変数に代入してから使用する
        <a href="" target="_blank" rel="noopener" class="p5link">p5.js</a>
      </h4>
      <p>それぞれのコードでピゴニャンが1周ずつ、合計2周まわります。</p>
      <code
        data-gist-id="b5aef29d43d7fdba839fc1787345285a"
        data-gist-highlight-line="1-3, 10, 18"
        data-gist-hide-footer="true"
      ></code>

      <h3>コラム：再帰呼び出し</h3>

      <h4 class="caption">
        <span>p.158コラム</span>
        本文のコード（その1）
        <a href="" target="_blank" rel="noopener" class="p5link">p5.js</a>
      </h4>
      <p>p.158の右段の下のコードです。関数呼び出しはdraw関数の中で行います。</p>
      <code
        data-gist-id="d574709e1b8cfd51b5c7a4f7e71d9b00"
        data-gist-highlight-line="1-3, 6-7"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.159コラム</span>
        本文のコード（その2）
        <a href="" target="_blank" rel="noopener" class="p5link">p5.js</a>
      </h4>
      <p>p.159の左段の下のコードです。</p>
      <code
        data-gist-id="cf6fe719092b0d42debaba0d099968d6"
        data-gist-highlight-line=""
        data-gist-hide-footer="true"
      ></code>

      <h2 id="ex">練習問題</h2>

      <h3>基本問題</h3>

      <p>
        for文を使って、ピゴニャンがキャンバスを1往復するプログラムを作ってみましょう。行きも帰りもfor文を使いますが、( )
        の中で変化させる変数の役割を変えてみます。
      </p>

      <ol>
        <li>ピゴニャンはキャンバスの左端 (x, y)=(30, 200); の位置に登場する。</li>
        <li>
          キャンバスの左端から右端に10回に分けて移動する。1回の移動の歩数は、キャンバスの右端（端から30歩手前）にぴったり着くように計算する。
        </li>
        <li>
          続いて、キャンバスの右端から左端に30歩ずつ移動する。キャンバスの左端（端から30歩以上手前）で止まるようにfor文の条件式を書く。
        </li>
        <li>最後にこちら（下）を向いて一言しゃべる。</li>
      </ol>

      <figure class="M">
        <img src="fig/ex08-1.png" />
      </figure>

      <a
        class="example"
        href="https://editor.p5js.org/p5nyan/full/I9wFPJoPT"
        target="_blank"
        rel="noopener"
        class="p5link"
        >実行例</a
      >

      <p>
        新しい「<a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener"
          >ピゴニャンのスケッチ</a
        >」を用意して次のコードと置きかえ、<mark>/* */</mark>
        でコメントアウトされた部分の指示どおりにコードを編集してください。
      </p>

      <code data-gist-id="26d825a89e9a6e86593742aadbab94b1" data-gist-hide-footer="true"></code>

      <p>ヒント</p>
      <ul>
        <li>問1は素直に10回繰り返しです。</li>
        <li>
          問2はレッスン5（演算）の復習です。ピゴニャンの幅は60あるので、キャンバスの右端は「右端のx座標 -
          30」になります。これを10回で移動するので…？
        </li>
        <li>
          問3は、カウンター変数ではなく、x座標になります。さらに、右端から左端に向かうので、x座標は減っていきます。x座標の最初の位置（初期値）は手計算してもよいですが、ピゴニャンの現在の座標を知る関数がありましたね。繰り返し条件は、ピゴニャンがキャンバスからはみ出さないように設定しましょう。
        </li>
        <li>問4はシンプルに。</li>
      </ul>

      <details>
        <summary>解答例</summary>
        <code data-gist-id="350f1f5c72fda2ebd0d57e7b18e1983b" data-gist-hide-footer="true"></code>
      </details>

      <h3>発展問題</h3>

      <p>
        1〜5の数字を入力すると、ピゴニャンが1辺をその回数ずつに分けて正方形にぐるりと一周するプログラムを作ってみましょう。
      </p>

      <ol>
        <li>1〜5の数字が押されるのを待つ。入力された値が1〜5の数値でない場合はプログラムを終了させる。</li>
        <li>何回に分けて歩くか最初にしゃべらせてから歩きはじめる。</li>
        <li>
          ピゴニャンを右回りに1周歩かせる。turn関数の引数は0／90／180／270の角度（それぞれ上／右／下／左に対応）でも指定できるのでfor文で書ける。※for...of文を使っても構わない。
        </li>
        <li>
          ぐるりと回るその1辺を、最初に入力された数値の回数に分けて移動する。各辺ごとに、何回目の移動かしゃべらせる。歩く歩数は40歩ずつ。
        </li>
      </ol>

      <figure class="M">
        <img src="fig/ex08-2.png" width="500" />
      </figure>

      <a
        class="example"
        href="https://editor.p5js.org/p5nyan/full/_VA60Ozpj"
        target="_blank"
        rel="noopener"
        class="p5link"
        >実行例</a
      >

      <p>
        新しい「<a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener"
          >ピゴニャンのスケッチ</a
        >」を用意して次のコードと置きかえ、<mark>/* */</mark>
        でコメントアウトされた部分の指示どおりにコードを編集してください。<br />
      </p>

      <code data-gist-id="cf433493f7683b6df4f1a956a040bfbb" data-gist-hide-footer="true"></code>

      <p>
        ヒント： 二重ループの問題ですね。turn関数はもちろん上下左右の文字でも動作しますから、
        for...of文を使って書いてもよいでしょう（解答例は角度指定のみです）。
      </p>

      <details>
        <summary>解答例</summary>
        <code data-gist-id="5be938ec2eecd253382ad1cb5b673bc5" data-gist-hide-footer="true"></code>
        <p></p>
      </details>
    </main>

    <footer>『 はじめての “文字で打ちこむ” プログラミングの本 』 サポートサイト</footer>

    <script src="codeNav.js" type="module"></script>
  </body>
</html>

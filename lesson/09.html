<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>レッスン 09</title>
    <link rel="stylesheet" href="lesson.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic:wght@400;700&display=swap" rel="stylesheet" />
    <script src="./gist-embed.min.js"></script>
  </head>

  <body>
    <header>
      <h1>レッスン 09</h1>
      <p>〜 配列 〜</p>
    </header>

    <nav class="back">
      <a href="../index.html">🔙</a>
      <a href="#">🔝</a>
    </nav>

    <main>
      <h2>サンプルコード</h2>

      <ul>
        <li>
          サポートサイトでは、<mark>async function draw() { ... }</mark> の中のコードは省略せずにすべて<ruby
            >載<rt>の</rt></ruby
          >せています。
        </li>
        <li>本に載っていない部分には<span class="gray">灰色の背景色</span>を付けています。</li>
        <li>
          先頭2行のおまじないと
          <mark>function setup() { ... }</mark>
          は省略しますが、みなさんのコードからは消さないでください。
        </li>
        <li>ここに載せているサンプルコードには、コードが読み取りやすいように「空行」を追加しています。</li>
        <li>
          キャプション横の
          <span class="p5link">p5.js</span>
          をクリックするとp5.jsのウェブエディターが開き、プログラムを実行することができます。
        </li>
      </ul>

      <nav class="codeNav">
        <select id="codeSelect">
          <option value="init" selected disabled>サンプルコードを選ぶ</option>
        </select>
        <label for="codeSelect">▼</label>
      </nav>

      <h3>9.1 配列の基本</h3>

      <h4 class="caption">
        <span>p.162</span>
        コード9.1 ピゴニャンがしゃべりながら歩くコード
        <a href="https://editor.p5js.org/p5nyan/sketches/A97THR1pT" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="34f1fa7d81cf2c3bd9419493243c911d"
        data-gist-highlight-line="1-3, 8"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.164</span>
        図9.4 ［構文］ 配列宣言
        <a href="https://editor.p5js.org/p5nyan/sketches/5CKc8Fp7F" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="d97cc0b8a4466fb2cfd0a801b799d65e"
        data-gist-highlight-line="1-3, 7-11"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.164</span>
        コード9.2 配列の宣言、<wbr />コード9.3 配列の初期値の記法
        <a href="https://editor.p5js.org/p5nyan/sketches/YW5mRv2zv" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>以下のコードは「コード9.3」です。p5.jsのコード整形の機能を使うと「コード9.2」になります。</p>
      <code
        data-gist-id="9287b480ac3a0058504727fd939fcd9b"
        data-gist-highlight-line="1-3, 11-15"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.165</span>
        図9.6 配列の使用の比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/xGNyjqt0s" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        こちらのサンプルコードでは、変数宣言の要素を横並びにしています（本のサンプルコードで要素ごとに改行しているのは書面のスペースの関係です）。<br />
        以降のコードでも同様に、配列の要素は横並びで宣言します。
      </p>
      <code
        data-gist-id="b5315598fe609855b81b0f1679866f6c"
        data-gist-highlight-line="1-3, 10"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.167</span>
        図9.10 配列の書きかえや代入の比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/3mv1tjkz9" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="cf141e32f1c6ea902165395d1753f298"
        data-gist-highlight-line="1-5, 13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.167</span>
        コード9.5 変数と配列の操作を見くらべる
        <a href="https://editor.p5js.org/p5nyan/sketches/e81VqHSbq" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>本では左右でくらべていますが、ここではひとつずつ上下に並べてくらべています。</p>
      <code
        data-gist-id="1df36da90e8cc7728c0e57354a2566d5"
        data-gist-highlight-line="1-3, 23-27"
        data-gist-hide-footer="true"
      ></code>

      <h3>9.2 配列と繰り返し</h3>

      <h4 class="caption">
        <span>p.168</span>
        図9.11 ［構文］ for...of文（配列版）（の例文）
        <a href="https://editor.p5js.org/p5nyan/sketches/1GZ18dX6E" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="738208c36944b69f4f522c0d780f0919"
        data-gist-highlight-line="1-3, 10"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.168</span>
        コード9.6 配列listの内容をピゴニャンがしゃべる（for...of文）
        <a href="https://editor.p5js.org/p5nyan/sketches/fw12sW4mU" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="5cd0a064a1ff22288c02a2ec3a5b4694"
        data-gist-highlight-line="1-3, 10"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.169</span>
        コード9.7 配列本体の書きかえにfor...of文は使えない
        <a href="https://editor.p5js.org/p5nyan/sketches/46gxGpEye" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        for...of文の変数がletで宣言されているのは、配列本体を書きかえられるかどうかの確認のためです。本来はconstで宣言します。次のコードも同様。
      </p>
      <code
        data-gist-id="f7498aa8d88909c576e8d4588b6692f3"
        data-gist-highlight-line="1-3, 14"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.169</span>
        コード9.8 繰り返し構文の中で配列本体を書きかえたいときは for 文を使う
        <a href="https://editor.p5js.org/p5nyan/sketches/FYY21DpEs" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="14f6fb3b82a0d67fbe976e2568a125d2"
        data-gist-highlight-line="1-3, 14"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.170</span>
        コード9.9 繰り返し構文の中で複数の配列にアクセスする
        <a href="https://editor.p5js.org/p5nyan/sketches/m0GqAs4pL" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="7ef021a5d317618fc86ae5c706ed0bc7"
        data-gist-highlight-line="1-3, 12"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.170</span>
        コード9.10 配列の長さ(要素数)を調べる
        <a href="" target="_blank" rel="noopener" class="p5link">p5.js</a>
      </h4>
      <code
        data-gist-id="9147333456db7d16d2dc2fe9ad236154"
        data-gist-highlight-line="1-3, 9-12"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.171</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/gCE6jYHN2" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="3382da6375bb905cecb0fcf17cd9ecf4"
        data-gist-highlight-line="1-3, 10"
        data-gist-hide-footer="true"
      ></code>

      <h3>9.3 配列のメソッド</h3>

      <h4 class="caption">
        <span>p.172</span>
        コード9.11 インデックスを使って、配列の末尾に新しい要素を追加する
        <a href="https://editor.p5js.org/p5nyan/sketches/VfWDqGm7s" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="3e59dc08aa18cd3801021a0297297e6b"
        data-gist-highlight-line="1-3, 6-7, 10"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.172</span>
        コード9.12 連番の配列と乱数の配列を自動生成する
        <a href="https://editor.p5js.org/p5nyan/sketches/oeQ89TvX6" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="7fb36329065c6869d3224df4ec458fb3"
        data-gist-highlight-line="1-3, 14"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.173</span>
        図9.16 ［メソッド］ 配列の基本メソッド（push、pop、shift、unshift）
        <a href="https://editor.p5js.org/p5nyan/sketches/pxnsy0T3-" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>各メソッドごとに確認のコードを追加しています。</p>
      <code
        data-gist-id="3c2f21a4a81c95f0ad2a9873e9f9c6ce"
        data-gist-highlight-line="1-3, 18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.175</span>
        コード9.13 pushとunshiftで要素を追加する
        <a href="https://editor.p5js.org/p5nyan/sketches/bMFmXgJxa" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="88cc00ac8da9d53802e1efe445cf501d"
        data-gist-highlight-line="1-3, 13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.176</span>
        コード9.14 pushメソッドで配列を生成する
        <a href="https://editor.p5js.org/p5nyan/sketches/viGb5ZEXZ" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="a4989c039bafc45b964d17dd384d2f0c"
        data-gist-highlight-line="1-3, 17"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.176</span>
        本文のコード
        <a href="" target="_blank" rel="noopener" class="p5link">p5.js</a>
      </h4>
      <code
        data-gist-id="9549de93c2641b77065f1ad6ed5be969"
        data-gist-highlight-line="1-3, 14"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.176</span>
        コード9.15 popメソッドやshiftメソッドで要素を取り出して使う
        <a href="https://editor.p5js.org/p5nyan/sketches" target="_blank" rel="noopener" class="p5link">p5.js</a>
      </h4>
      <code
        data-gist-id="8ec5a4bfa3f2e20257d39a91856d9852"
        data-gist-highlight-line="1-3, 15"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.177</span>
        図9.21 ［メソッド］ spliceメソッド（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/6hiQWOp6a" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>結果表示のコードを追加しています。</p>
      <code
        data-gist-id="d8c76df47f4914062406e2b875eaa8c2"
        data-gist-highlight-line="1-3, 15"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.177</span>
        図9.22 spliceメソッドの比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/wHdX3W8kF" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="29e5e24fa077c5f3ef4506c7ba27d4bb"
        data-gist-highlight-line="1-3, 15"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.178</span>
        図9.23 ［メソッド］ includes メソッドと indexOf メソッド
        <a href="https://editor.p5js.org/p5nyan/sketches/DghmACEZX" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>結果表示のコードを追加しています。</p>
      <code
        data-gist-id="2f89aa7f6b8995e322b42fc6d45ee31c"
        data-gist-highlight-line="1-3, 11"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.178</span>
        図9.24 includesメソッドとindexOfメソッドの比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/itiYImNg5" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="5ef55d89b4b737e91a7c5175fa9fa993"
        data-gist-highlight-line="1-3, 13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.178</span>
        コード9.16 random関数で配列からランダムに要素を取り出す
        <a href="https://editor.p5js.org/p5nyan/sketches/LugXvMil_" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="86dddc64fc43967c3d377c26c6e93080"
        data-gist-highlight-line="1-3, 12"
        data-gist-hide-footer="true"
      ></code>

      <h3>コラム：配列のコピー</h3>

      <h4 class="caption">
        <span>p.180コラム</span>
        本文のコード（配列の変数同士の代入）
        <a href="https://editor.p5js.org/p5nyan/sketches/I6cvKbh6k" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="03a16f930aa5c4c8f80fd6bb5a30230d"
        data-gist-highlight-line="1-3, 15"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.181コラム</span>
        本文のコード（その1／浅いコピー）
        <a href="https://editor.p5js.org/p5nyan/sketches/9nUo-bO4E" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>スプレッド演算子のほう、新しい変数list3に複製するよう本から変更しています。</p>
      <code
        data-gist-id="dc20c3257e1f368937904e8f8c2e9f58"
        data-gist-highlight-line="1-3, 11-14, 17-20"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.181コラム</span>
        本文のコード（その2／配列の深いコピーとオブジェクトの複製）
        <a href="https://editor.p5js.org/p5nyan/sketches/pZVQr_ao1" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>変数名を変更しています（shallow copy … 浅いコピー、deep copy … 深いコピー）。</p>
      <code
        data-gist-id="0c2160575dc55a486b2a6af902184917"
        data-gist-highlight-line="1-3, 19-30, 39"
        data-gist-hide-footer="true"
      ></code>

      <h2 id="ex">練習問題</h2>

      <h3>基本問題</h3>

      <p>概要</p>

      <ol>
        <li></li>
      </ol>

      <figure class="M">
        <img src="fig/ex.png" />
      </figure>

      <a class="example" href="" target="_blank" rel="noopener" class="p5link">実行例</a>

      <p>
        新しい「ピゴニャンのスケッチ」を用意して次のコードと置きかえ、<mark>/* */</mark>
        でコメントアウトされた部分の指示どおりにコードを編集してください。
      </p>

      <code data-gist-id="" data-gist-hide-footer="true"></code>

      <p>ヒント</p>
      <ul>
        <li></li>
      </ul>

      <details>
        <summary>解答例</summary>
        <code data-gist-id="" data-gist-hide-footer="true"></code>
      </details>

      <h3>発展問題</h3>

      <p>
        キャンバスに配置された3匹の魚を、ピゴニャンが上から順番に食べていくプログラムを作ってみましょう。動きが複雑なので、まずは実行例を見てください。
      </p>

      <ul>
        <li>
          魚を3匹、表示させる。x座標は、キャンバスの端から30だけ内側の範囲でランダムに選ぶ。y座標は、キャンバスを5等分した2〜4番目の位置とする（キャンバスの縦方向の2/5、3/5、4/5の位置）。
        </li>
        <li>魚の色もランダムに決める。色名の配列すでに用意されているが、自由に変更／追加して構わない。</li>
        <li>魚を配置したときに、そのx座標と色名を配列に記録（追加）しておく。</li>
        <li>ピゴニャンは、上の魚から順に、魚の真上まで3回に分けてx方向に移動する。</li>
        <li>魚の真上まで来たら、y方向に1回だけ移動して魚を食べる。魚を食べたら、その魚の色になる。</li>
        <li>これを3回繰り返して、3匹の魚を食べて終了。</li>
      </ul>

      <figure class="M"><img src="fig/ex09-2.png" width="500" /></figure>

      <a
        class="example"
        href="https://editor.p5js.org/p5nyan/full/_H0JaUN5K"
        target="_blank"
        rel="noopener"
        class="p5link"
        >実行例</a
      >

      <p>
        新しい「ピゴニャンのスケッチ」を用意して次のコードと置きかえ、<mark>/* */</mark>
        でコメントアウトされた部分の指示どおりにコードを編集してください。
      </p>

      <code data-gist-id="e034472c68d50735e384faf6251c30e5" data-gist-hide-footer="true"></code>

      <p>
        ヒント：ランダムに決めた魚のx座標と色名を配列に入れておき、その配列の値を取り出しながら処理するプログラムです。次の魚がピゴニャンの右にいるか左にいるかも判断（if文）して、ピゴニャンの方向を変更する必要があります。
      </p>

      <details>
        <summary>解答例</summary>
        <code data-gist-id="07d03fdf4ea944749beae949fa877bac" data-gist-hide-footer="true"></code>
      </details>
    </main>

    <footer>『 はじめての “文字で打ちこむ” プログラミングの本 』 サポートサイト</footer>

    <script src="codeNav.js" type="module"></script>
  </body>
</html>

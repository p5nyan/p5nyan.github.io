<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>レッスン 06</title>
    <link rel="stylesheet" href="lesson.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic:wght@400;700&display=swap" rel="stylesheet" />
    <script src="./gist-embed.min.js"></script>
  </head>

  <body>
    <header>
      <h1>レッスン 06</h1>
      <p>〜 条件分岐 〜</p>
    </header>

    <nav class="back">
      <a href="../index.html">🔙</a>
      <a href="#">🔝</a>
    </nav>

    <main>
      <h2>サンプルコード</h2>

      <ul>
        <li>
          サポートサイトでは、<mark>async function draw() { ... }</mark> の中のコードは省略せずにすべて<ruby
            >載<rt>の</rt></ruby
          >せています。
        </li>
        <li>本に載っていない部分には<span class="gray">灰色の背景色</span>を付けています。</li>
        <li>
          2つ目のサンプルコードからは先頭2行のおまじないと
          <mark>function setup() { ... }</mark>
          は省略しますが、みなさんのコードからは消さないでください。
        </li>
        <li>ここに載せているサンプルコードには、コードが読み取りやすいように「空行」を追加しています。</li>
        <li>
          キャプション横の
          <span class="p5link">p5.js</span>
          をクリックするとp5.jsのウェブエディターが開き、プログラムを実行することができます。
        </li>
      </ul>

      <div class="sketchLink" style="width: 50%">
        <a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener">
          ピゴニャンのスケッチを開く
        </a>
      </div>

      <nav class="codeNav">
        <select id="codeSelect">
          <option value="init" selected disabled>サンプルコードを選ぶ</option>
        </select>
        <label for="codeSelect">▼</label>
      </nav>

      <h3>6.1 「もし〜なら」if文</h3>

      <h4 class="caption">
        <span>p.105</span>
        コード6.1 ピゴニャンをランダムに移動して色を変えるコード(途中まで)
        <a href="https://editor.p5js.org/p5nyan/sketches/9Jl_4wfsT" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code data-gist-id="927094e74a5d1e143e4a849f3c1b5cf6" data-gist-hide-footer="true"></code>

      <h4 class="caption">
        <span>p.106</span>
        図6.5 ［構文］ if文（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/GlVFBp5BS" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="50a11e2b8f644b99737835420146f337"
        data-gist-highlight-line="1, 6-8"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.107</span>
        図6.7 if文の比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/-LW0O_0jB" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="f63f692f34dc2e286971ba30d7e62b11"
        data-gist-highlight-line=""
        data-gist-hide-footer="true"
      ></code>

      <h3>6.2 条件式</h3>

      <h4 class="caption">
        <span>p.111</span>
        コード6.2 if文の入れ子による範囲の指定、<wbr />図6.14 ANDの比較コード、<wbr />図6.15 ORの比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/7k8pr9wWv" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        コード6.2と図6.14のコードは同じ意味なので、実行しても同じふるまいをします（片方をコメントアウトして確認してください）。また、前半で生成しているx座標が0〜widthの範囲なので、図6.15のコードのif文の条件が満たされることはありません（乱数の範囲を変えるか、キャンバス外の座標を直接指定してください）。
      </p>
      <code
        data-gist-id="14ef551d039e50da4ffc50fefee84368"
        data-gist-highlight-line="1-9, 18, 23, 28"
        data-gist-hide-footer="true"
      ></code>

      <h3>6.3 「そうでなければ〜」 else文とelse if文</h3>

      <h4 class="caption">
        <span>p.113</span>
        図6.17 ［構文］ else文（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/tISul5RlY" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="33aea855b9f74497153d3c4a9430016e"
        data-gist-highlight-line="1, 8-10"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.114</span>
        図6.19 if文〜else文の比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/1iApQ5VTu" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="97846a94f714624dcbcdfab6b69cb52f"
        data-gist-highlight-line="1-5, 14-16"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.115</span>
        図6.20 ［構文］ else if文の構文（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/6mr4BFHFW" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="1769d9f131d6a8b106453bd71292de2b"
        data-gist-highlight-line="1, 8-10"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.115</span>
        図6.21 if文〜else if文の比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/8rzM4JCW1" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="e96d7309321feb3aba50fc644d10f951"
        data-gist-highlight-line="1-8, 16-18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.116</span>
        図6.23 if文〜else if文〜else文の比較コード
        <a href="https://editor.p5js.org/p5nyan/sketches/Nh0XnPpAW" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="2489600c662502a6a9fc00f07625e447"
        data-gist-highlight-line="1-8, 19-21"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.117</span>
        本文のコード（その1）
        <a href="https://editor.p5js.org/p5nyan/sketches/Jq3Gmr8f1" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="29e021691eaf0b3b3ebf701155bb1815"
        data-gist-highlight-line="1-2, 13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.117</span>
        本文のコード（その2）
        <a href="https://editor.p5js.org/p5nyan/sketches/9BZEq2WjZ" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="7b1e6184905ae4a513631abde4ba2122"
        data-gist-highlight-line="1-2, 15"
        data-gist-hide-footer="true"
      ></code>

      <h3>6.4 三項演算子</h3>

      <h4 class="caption">
        <span>p.118</span>
        図6.26 ［構文］ 三項演算子（の例）
        <a href="https://editor.p5js.org/p5nyan/sketches/kU7HLEypN" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="3915893b8e6bc592b6ec0222006078b6"
        data-gist-highlight-line="1-7, 11-13"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.119</span>
        コード6.4 if文〜else文のコードの例❶、<wbr />コード6.5 三項演算子の使用例❶
        <a href="https://editor.p5js.org/p5nyan/sketches/-zPwNfvKx" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="adfdf59e4987df0263c79fa413102885"
        data-gist-highlight-line="15, 19-22"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.119</span>
        コード 6.6 if文〜else文のコードの例❷、<wbr />コード6.7 三項演算子の使用例❷
        <a href="https://editor.p5js.org/p5nyan/sketches/tsCMyG5Ew" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>コード6.6とコード6.7の処理は同じなので、一方をコメントアウトして動作確認してください。</p>
      <code
        data-gist-id="00b0bd7ad2855ebb423a8ef1b1509f37"
        data-gist-highlight-line="18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.120</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/jsqFzLan6" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>エラーの出るコードです。</p>
      <code
        data-gist-id="2f695e57c4eb3cba9509d6e881dd813a"
        data-gist-highlight-line="1, 8, 10"
        data-gist-hide-footer="true"
      ></code>

      <h3>コラム：式と文</h3>

      <h4 class="caption">
        <span>p.123コラム</span>
        コードC6.b 三項演算子は関数呼び出しの仲間だと考える、<wbr />コードC6.c 論理演算子と三項演算子
        <a href="https://editor.p5js.org/p5nyan/sketches/AufB08_k_" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="d47efd7851f2457602cb677a479da46e"
        data-gist-highlight-line="1-3, 7, 11"
        data-gist-hide-footer="true"
      ></code>

      <h2 id="ex">練習問題</h2>

      <h3>基本問題</h3>

      <p>
        ランダムな位置（x座標）に現れた魚がピゴニャンの右側か左側か、ピゴニャンにしゃべらせるプログラムを作りましょう。
      </p>

      <ul>
        <li>ピゴニャンをキャンバスの左右中央、y座標250の位置に登場させる。</li>
        <li>魚はキャンバスのx方向にランダムな位置に現れる（y方向は100で固定）。</li>
        <li>魚がピゴニャンの右側にいたら「右」、左側にいたら「左」とピゴニャンにしゃべらせる。</li>
      </ul>

      <figure class="M">
        <img src="fig/ex06-1.png" />
      </figure>

      <a
        class="example"
        href="https://editor.p5js.org/p5nyan/full/xzOwo3Utz"
        target="_blank"
        rel="noopener"
        class="p5link"
        >実行例</a
      >

      <p>
        新しい「<a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener"
          >ピゴニャンのスケッチ</a
        >」を用意して次のコードと置きかえ、<mark>/* */</mark>
        でコメントアウトされた部分の指示どおりにコードを編集してください。1問目はレッスン5の復習です。
      </p>

      <code data-gist-id="963c541e5a9f0922c5847cbd9fe8f69d" data-gist-hide-footer="true"></code>

      <p>ヒントは次のとおり</p>
      <ul>
        <li>
          ある2点が左右のどちらにあるか…という条件式はいろいろな書き方ができます。例えば、x座標AとBがあるとき、<mark
            >A &gt; B</mark
          >
          ならAはBより右側（x座標が大きいほう）にあります。これは
          <mark>A - B &gt; 0</mark> と書いても同じです。
        </li>
        <li>
          ちなみに、AがBよりも「10以上右側にある」という条件式は
          <mark>A - B &gt; 10</mark> と書けます。同じく左側にある…は（Bのほうが大きくなるので）<mark
            >B - A &gt; 10</mark
          >
          ですが、<mark>A - B &lt; -10</mark>
          とも書けますね。図を描いて確認してみましょう。（なお、この考え方を次の発展問題で使います）
        </li>
      </ul>
      <p>
        すぐにできてしまった…という人は、問2の条件分岐を三項演算子で書き直してみてください。どこに三項演算子を入れるか…がポイントです。
      </p>

      <details>
        <summary>解答例</summary>
        <code data-gist-id="56c5cdc4b541abceaa5664f5559bf64e" data-gist-hide-footer="true"></code>
      </details>

      <details>
        <summary>三項演算子で書いた場合</summary>
        <code class="one-code"> say(fx - getX() > 0 ? "右" : "左"); </code>
      </details>

      <h3>発展問題</h3>

      <p>ランダムな位置に現れた魚の方向をピゴニャンが向いて、その座標をしゃべるプログラムを作りましょう。</p>

      <ol>
        <li>魚はキャンバス全体からランダムな位置に現れる。</li>
        <li>
          魚がピゴニャンの近くにいたら、魚は食べられて終了する。「近く」はピゴニャンの中心から上下左右50未満の距離（図を参照）。
        </li>
        <li>魚の位置がピゴニャンより左で、かつ、x方向に50以上離れていたら、ピゴニャンは左を向く。右も同じ。</li>
        <li>
          魚とピゴニャンがx方向に50以上離れていないときは、魚はピゴニャンの上か下にいるとして、
          魚がいる上下の方向を見る。
        </li>
        <li>（魚が食べられてなければ）最後に魚の座標をしゃべる。</li>
      </ol>

      <figure class="L">
        <img src="fig/ex06-2-1.png" />
      </figure>

      <a
        class="example"
        href="https://editor.p5js.org/p5nyan/full/Tn7GcUyo3"
        target="_blank"
        rel="noopener"
        class="p5link"
        >実行例</a
      >

      <p>
        新しい「<a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener"
          >ピゴニャンのスケッチ</a
        >」を用意して次のコードと置きかえ、<mark>/* */</mark>
        でコメントアウトされた部分の指示どおりにコードを編集してください。
      </p>

      <code data-gist-id="7c9255ce36a5c841199c0170837d1cbd" data-gist-hide-footer="true"></code>

      <p>条件分岐（条件式）は次の図を見ながら考えるとよいでしょう。</p>

      <figure class="L">
        <img src="fig/ex06-2-2.png" />
      </figure>

      <p>ヒントは次のとおり</p>
      <ul>
        <li>
          問1について、魚とピゴニャンの距離（変数dist_xやdist_y）を絶対値（正の値）にしていないので、ここでは絶対値に変えてから計算します。「かつ」の論理演算子を使います。
        </li>
        <li>
          問2と問3は、変数dist_xの符号も考えて条件式を作ります。<mark>dist_x = fx - px;</mark
          >なので、魚がピゴニャンの右側にいるときは…？
        </li>
        <li>
          魚がピゴニャンの左右にいないとき（上下にいるとき）には、条件分岐を入れ子にしています。「そうでなければ…」の<mark
            >{ }</mark
          >の中に、さてに if文が入ります
        </li>
        <li>
          問4と問5は、魚がピゴニャンの上か下かだけを区別すればOKです。50離れているかどうかは気にしなくても構いません。
        </li>
      </ul>

      <details>
        <summary>解答例</summary>
        <code data-gist-id="68c2a9cb8e0448ad33e51ca82858bfb5" data-gist-hide-footer="true"></code>
      </details>
    </main>

    <footer>『 はじめての “文字で打ちこむ” プログラミングの本 』 サポートサイト</footer>

    <script src="codeNav.js" type="module"></script>
  </body>
</html>

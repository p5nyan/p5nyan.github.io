<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>レッスン 14</title>
    <link rel="stylesheet" href="lesson.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic:wght@400;700&display=swap" rel="stylesheet" />
    <script src="./gist-embed.min.js"></script>
  </head>

  <body>
    <header>
      <h1>レッスン 14</h1>
      <p>〜 本当のp5.jsをはじめよう 〜</p>
    </header>

    <nav class="back">
      <a href="../index.html">🔙</a>
      <a href="#">🔝</a>
    </nav>

    <main>
      <h2>サンプルコード</h2>

      <ul>
        <li>
          レッスン14では、コードをすべて省略せずに<ruby>載<rt>の</rt></ruby
          >せています。<br />
          ハイライト（灰色以外の背景色）は、本に載せているサンプルコードの範囲ではなく、<strong>コードが追加・変更された行</strong>に対して付けています。
        </li>
        <li>ここに載せているサンプルコードには、コードが読み取りやすいように「空行」を追加しています。</li>
        <li>
          キャプション横の
          <span class="p5link">p5.js</span>
          をクリックするとp5.jsのウェブエディターが開き、プログラムを実行することができます。
        </li>
      </ul>

      <div class="sketchLink" style="width: 50%">
        <a href="https://editor.p5js.org/p5nyan/sketches/fHkjcRuKX" target="_blank" rel="noopener">
          ピゴニャンのスケッチを開く
        </a>
      </div>

      <nav class="codeNav">
        <select id="codeSelect">
          <option value="init" selected disabled>サンプルコードを選ぶ</option>
        </select>
        <label for="codeSelect">▼</label>
      </nav>

      <h3>14.1 ピゴニャンのいないp5.jsを使ってみる</h3>

      <h4 class="caption">
        <span>p.267</span>
        コード14.2 circle関数の呼び出し
        <a href="https://editor.p5js.org/p5nyan/sketches/883-CavlM" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        「ピゴニャンのスケッチ」ではなく、p5.jsの最初のスケッチ（ファイル→新規作成）です。p5.jsの最初のスケッチは停止ボタン［■］を押さないとプログラムが停止しないので注意してください。
      </p>
      <code data-gist-id="a7e41c9d35f1a890ec99d33a9d1dfdb9" data-gist-hide-footer="true"></code>

      <h4 class="caption">
        <span>p.267</span>
        コード14.3 円を右方向に動かす
        <a href="https://editor.p5js.org/p5nyan/sketches/1SSzk2WoO" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>コード14.2に変更・追加です。</p>
      <code
        data-gist-id="e3475e760bbc5566a104591ef23ca666"
        data-gist-highlight-line="3-9, 12"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.268-269</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/_R8CtP21f" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="3e999a027d893fa08b531aa5631bc103"
        data-gist-highlight-line="1-5, 7-9, 11-14, 18"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.269</span>
        コード14.5 ピゴニャンを歩かせる
        <a href="https://editor.p5js.org/p5nyan/sketches/_H1UrnQ62" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        「ピゴニャンのスケッチ」です。loop関数を呼び出すとawaitは効かなくなるので、11行目の<mark>await sleep(1);</mark
        >はコメントアウトしても結果は同じです。また、ここから先は（awaitを使うための）先頭2行のおまじないと10行目のasyncは消してもかまいません。
      </p>
      <code
        data-gist-id="c9ef982ae32113df46d9117b5ef69ab5"
        data-gist-highlight-line="1-6, 8-12, 14"
        data-gist-hide-footer="true"
      ></code>

      <h3>14.2 ピゴニャンのゲームを作ってみよう</h3>

      <h4 class="caption">
        <span>p.271</span>
        コード14.6 土台となるコード
        <a href="https://editor.p5js.org/p5nyan/sketches/XZZoMeKKr" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code data-gist-id="2f434696ba693f4584665c3e92cf178e" data-gist-hide-footer="true"></code>

      <h4 class="caption">
        <span>p.272</span>
        コード14.7 ピゴニャンの向きを変える
        <a href="https://editor.p5js.org/p5nyan/sketches/TCxDubHTe" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="49e6ff9311e5d03ea136df9a6334e706"
        data-gist-highlight-line="1-11"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.273</span>
        コード14.9 ピゴニャンが端に着いたら跳ね返す、<wbr />コード14.10 跳ね返りの条件式
        <a href="https://editor.p5js.org/p5nyan/sketches/4R4focAhp" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>コード14.10は条件式の変更です。コメントアウトを切り替えて動作を確認してください。</p>
      <code
        data-gist-id="6bedfd2ecc78405bf2b7852e6ac0c149"
        data-gist-highlight-line="1-10, 18-31"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.273</span>
        コード14.11 魚の配置
        <a href="https://editor.p5js.org/p5nyan/sketches/WNs3x5Ua8" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="666c7e58ae8890ab51f41ba0c9e4983f"
        data-gist-highlight-line="1-6, 13-37"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.275</span>
        コード14.12 食べた魚の数を数える、<wbr />コード14.13 魚を食べたらスコアをしゃべる
        <a href="https://editor.p5js.org/p5nyan/sketches/rzh940ylY" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="85b5aa9a35c20c22a5c9ba1af703f0f2"
        data-gist-highlight-line="3-18, 24, 30-50"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.276</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/tPoYVMWkR" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="9386d9258a684b60a2157ace24a6090c"
        data-gist-highlight-line="1-33, 38-51"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.277</span>
        コード14.17 残り時間をキャンバスに表示する
        <a href="https://editor.p5js.org/p5nyan/sketches/eOpZ-IJ-J" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>コード14.16の内容も含みます。</p>
      <code
        data-gist-id="0246eb3712641d610ee1f2b1d060a2fb"
        data-gist-highlight-line="1-33, 38-51"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.278</span>
        コード14.18 成功したとき、<wbr />コード14.19 失敗したとき
        <a href="https://editor.p5js.org/p5nyan/sketches/j_0kT-rXD" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="9e015d0536da37b596da74a0f5b57d7d"
        data-gist-highlight-line="1-39, 47, 55-68"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.279</span>
        コード14.23 if文を入れ子にしてまとめる
        <a href="https://editor.p5js.org/p5nyan/sketches/7kTCXDF5-" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="e9b1802194b27c750a04f68b56156c69"
        data-gist-highlight-line="1-39, 51-64"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.279</span>
        コード14.24 showEnding関数の定義、<wbr />コード14.25 showEnding関数の呼び出し
        <a href="https://editor.p5js.org/p5nyan/sketches/cwM6lJqD0" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="356a18d87626c39ada54754e017576c3"
        data-gist-highlight-line="1-39, 46-60"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.281</span>
        コード14.29 showEnding関数の定義(引数の追加)、<wbr />コード14.30 showEnding関数の呼び出し(変更)
        <a href="https://editor.p5js.org/p5nyan/sketches/Gi5BvzYY8" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>showEnding関数への引数の追加とそれに伴うコードの変更のみです。</p>
      <code
        data-gist-id="f6fc57af54a8356d4cc9a625c9bbd478"
        data-gist-highlight-line="1-39, 46-60"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.282</span>
        コード14.31 ピゴニャンの登場位置の調整、<wbr />コード14.32 魚の登場位置の調整
        <a href="https://editor.p5js.org/p5nyan/sketches/6ny7fmc74" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="eb1ed0ceebc892af22ad01b489094fa9"
        data-gist-highlight-line="1-5, 7-11, 13-73"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.282-283</span>
        コード14.33 パラメーターをまとめる、<wbr />コード14.34 isOutside関数の切り出し
        <a href="https://editor.p5js.org/p5nyan/sketches/XGoIT4IG_" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="11371e1e61230f61884f251747d4751a"
        data-gist-highlight-line="6-14, 16-20, 22-26, 28-34, 39-40, 42-45, 47-66, 77-89"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.283-284</span>
        コード14.35 ピゴニャンのゲーム(完成版)
        <a href="https://editor.p5js.org/p5nyan/sketches/zuiDfNl4A" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>ひとつ前と同じサンプルコードです。</p>
      <code data-gist-id="663d39fefaaead2e0f55f70d26d2ce18" data-gist-hide-footer="true"></code>

      <h3>14.3 アニメーションを作ってみよう</h3>

      <h4 class="caption">
        <span>p.286</span>
        コード14.36 土台となるコード
        <a href="https://editor.p5js.org/p5nyan/sketches/Hjevbuijg" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code data-gist-id="1c056e3ad1f85149c7632ce44e7d11c2" data-gist-hide-footer="true"></code>

      <h4 class="caption">
        <span>p.286</span>
        コード14.37 円を横一列に並べる
        <a href="https://editor.p5js.org/p5nyan/sketches/LxYybwVxm" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="3cb6f9fcb57c38281c07da4ea4268afa"
        data-gist-highlight-line="1-11, 16"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.286</span>
        コード14.38 左端の円を調整する
        <a href="https://editor.p5js.org/p5nyan/sketches/Rd-qM8mnO" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="e1e7575ccbcca2866deab23ca8623aea"
        data-gist-highlight-line="1-11, 17"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.287</span>
        コード14.39 パラメーターとして定義する、<wbr />コード14.40 for文における定数への置きかえ
        <a href="https://editor.p5js.org/p5nyan/sketches/YS5xqU_lR" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="d85adcb06f0860e6d493ea42e42fa0a9"
        data-gist-highlight-line="1-2, 4-12, 17"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.287</span>
        コード14.41 円をすき間を空けて並べる
        <a href="https://editor.p5js.org/p5nyan/sketches/q_VOXkttM" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="42f729c162d3797edc698ec5eef20fd4"
        data-gist-highlight-line="1-12, 17"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.288</span>
        コード14.42 円を1色でぬりつぶす、<wbr />コード14.43 ランダムな色名を戻り値で返すrandomColor関数の定義、<wbr />コード14.44
        円の色をランダムにぬりつぶす
        <a href="https://editor.p5js.org/p5nyan/sketches/D0t8Dt38h" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="a3f29a02f755cc5bbde045c35f6199ad"
        data-gist-highlight-line="1-14, 17-20"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.289</span>
        コード14.45 二重ループで円を敷き詰める、<wbr />本文コード
        <a href="https://editor.p5js.org/p5nyan/sketches/pxWVHOeTB" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>本文に合わせて、17行目を18行目のようにさらに変更します。</p>
      <code
        data-gist-id="f0786dcd9d7e987ca1e5c2c3b7d384c5"
        data-gist-highlight-line="1-12, 21-26"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.290</span>
        コード14.48 四角形を追加描画する
        <a href="https://editor.p5js.org/p5nyan/sketches/XC8nEEThG" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="2a993f11a030f439c8e5072f9e60bed2"
        data-gist-highlight-line="1-7, 9-17, 20-28"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.291</span>
        コード14.49 マウスポインターで色を付ける(途中まで)、<wbr />コード14.50 x方向の条件式
        <a href="https://editor.p5js.org/p5nyan/sketches/CNlS_shYN" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="c6bc6f04afc3a27672fe5074698f2822"
        data-gist-highlight-line="1-16, 24-33"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.292</span>
        コード14.52 x方向とy方向の条件式をORでつなぐ
        <a href="https://editor.p5js.org/p5nyan/sketches/4L6BDIEg3" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>このサンプルコードのようにORでつなぐのが正解ですが、ANDに書きかえて試してみてください。</p>
      <code
        data-gist-id="89d4dfe7a0d66587fb075b45f2965cb7"
        data-gist-highlight-line="1-16, 22-35"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.293</span>
        本文のコード
        <a href="https://editor.p5js.org/p5nyan/sketches/hqdrtvKe9" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="27dac2c31b042144f7ff2420b0ae7710"
        data-gist-highlight-line="1-3, 5-14, 16-26, 28-35"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.294</span>
        コード14.53 円の大きさdiaに足しこむ変数deltaの符号を条件によって変更する、<wbr />コード14.54
        -1をかけて符号を反転する
        <a href="https://editor.p5js.org/p5nyan/sketches/t5qRKtcVv" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        コード14.53とコード14.54の意味は同じですが、コード14.54の表現のほうが短く書けます。コメントアウトを入れ替えて試してみてください。
      </p>
      <code
        data-gist-id="c82ffdc8e80fc67bf784f144ba32d13e"
        data-gist-highlight-line="1-4, 6-15, 17, 24, 31-50"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.295</span>
        コード14.55 変更点1、<wbr />コード14.56 変更点2、<wbr />14.58 if文を追加
        <a href="https://editor.p5js.org/p5nyan/sketches/ojkbR4oA5" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <code
        data-gist-id="405b476f230bb77189a2bb65eea1439b"
        data-gist-highlight-line="1, 4, 6-26, 28, 33, 35-43"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.296-297</span>
        コード14.59 fill関数を元に戻す、<wbr />コード14.60 配列col_listの中身を更新するupdateColor関数の定義、<wbr />コード14.62
        updateColor関数の呼び出し❶、<wbr />同❷、<wbr />コード14.61 円の個数(定数N_CIRCLEの値)の計算、<wbr />コード14.64
        配列col_listから色名を受け取る
        <a href="https://editor.p5js.org/p5nyan/sketches/eA1x2fz_z" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        37行目の<mark>fill("firebrick");</mark>がコメントアウトされたままなので、実行してマウスを動かすと不思議なことになりますが、どうしてそうなるのか考えてみてください。
      </p>
      <code
        data-gist-id="a24df9db5037b275c631e367b1275311"
        data-gist-highlight-line="1-5, 9-13, 15-19, 24-30, 32-38, 43-46, 48-56"
        data-gist-hide-footer="true"
      ></code>

      <h4 class="caption">
        <span>p.298-299</span>
        コード14.65 アニメーション(完成版)
        <a href="https://editor.p5js.org/p5nyan/sketches/vG0jqCzKT" target="_blank" rel="noopener" class="p5link"
          >p5.js</a
        >
      </h4>
      <p>
        正誤表にも載せていますが、本のコードの39行目と49行目に当たる部分がxとyで上下入れ替わっています。このプログラムの場合、どちらでも問題ありません。
      </p>
      <code
        data-gist-id="f2c4edf8f83abaac80e876b9acee527e"
        data-gist-highlight-line=""
        data-gist-hide-footer="true"
      ></code>
    </main>

    <footer>『 はじめての “文字で打ちこむ” プログラミングの本 』 サポートサイト</footer>

    <script src="codeNav.js" type="module"></script>
  </body>
</html>
